<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>登入</title>
    <link href="./img/cloudyLogoMINI.png" rel="icon">
    <link rel="stylesheet" href="./css/login.css"><!--我手改的css -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/LoginSignUp.css">
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/time3.js"></script>
    <script src="./js/time.js" defer></script> <!-- 右上角時鐘 -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script><!-- 以下是使用sweetalert -->
</head>

<body style="font-family: Helvetica; font-size: 18px;">

    <nav class="navbar navbar-expand-lg navbar-light" style="background: #130041;
    background: -moz-linear-gradient(left, #130041 0%, #130041 22%, #8d81a5 67%);
    background: -webkit-linear-gradient(left, #130041 0%,#130041 22%,#8d81a5 67%);
    background: linear-gradient(to right, #130041  0%,#130041 22%,#8d81a5 67%);
     filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#130041', endColorstr='#e7e5ec',GradientType=1 );
    padding-top: 0.1rem;padding-bottom:0.1rem;">
        <div class="container-fluid">
            <img src="./img/cloudyLogo.png" alt="" style="width:130px;margin-right:20px;margin-left: 30px;">
            <a href="#" class="navbar-brand" style="color: white;"></a>
            
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="container-fluid">
                    <div class="row align-items-center">
                        <!-- align-items-center 是為了讓回首頁跟時間對齊 -->
                        <!-- 回首頁 -->
                        <div class="col-lg-4">
                            <ul class="navbar-nav ms-auto mb-2 mb-lg-0" style="white-space:nowrap;">
                            <li class="nav-item d-lg-block d-none">
                                <a class="nav-link active d-flex justify-content-end" aria-current="page" href="#" style="margin-right: 0px;color: white"><strong>回首頁</strong></a>
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link active d-flex justify-content-end" aria-current="page" href="#" style="margin-right: 0px;color: white;margin-right: 50px;"><strong>登出</strong></a>
                            </li>
                            </ul>
                        </div>
                        <!-- 右邊時間 -->
                        <div class="col-lg-4 d-lg-block d-none" style=" white-space:nowrap;display: flex;align-items: center;">
                            <div id="clock" style="font-size: 16px;"></div>
                        </div>
                    </div>
                <!-- </div> -->
                </div>
            </nav>      
        </div>
    </nav>

    
        <div class="section pb-5 pt-5 pt-sm-2 text-center" style="margin-top: 10px;">
            <h6 class="mb-0 pb-3"><span>一般登入</span><span>QRCODE</span></h6>
            <input class="checkbox" type="checkbox" id="reg-log" name="reg-log" />
            <label for="reg-log" ></label>

            <div class="card-3d-wrap mx-auto" style="margin-top: 0px;">
                <div class="card-3d-wrapper">

                    <!-- 前面 -->
                    <div class="card-front">
                        <!-- 登入 -->
                        <div class="container">
                            <div class="screen">
                                <div class="screen__content">
                                    <form class="login">

                                        <div class="login__field">
                                            <label class="form-label" style="display: block; margin-bottom: opx;">
                                                <p style="font-size: 18px;font-weight: bold;float: left;margin-left: 20px;"> 身分證</p>
                                            </label>
                                            <div style="margin-top: 50px;">
                                                <input type="text" class="login__input" placeholder="Identity Card" id="IDNumber">
                                            </div>
                                        </div>
                                        <div style="text-align: left;margin-left: 50px;">
                                            <input type="checkbox" id="remembermemberID">
                                            <label class="form-check-label custom-control-label" for="remembermemberID">
                                                <p>記住身分證</p>
                                            </label>
                                        </div>



                                        <div class="login__field">
                                            <label class="form-label" style="display: block; margin-bottom: opx;">
                                                <p
                                                    style="font-size: 16px;font-weight: bold;float: left;margin-left: 20px;">
                                                    密碼</p>
                                            </label>
                                            </label>
                                            <div style="margin-top: 50px;">
                                                <input type="password" class="login__input" placeholder="Password" id="password">
                                            </div>
                                        </div>
                                        


                                        <div class="login__field">
                                            <label class="form-label" style="display: block; margin-bottom: opx;">
                                                <p
                                                    style="font-size: 16px;font-weight: bold;float: left;margin-left: 20px;">
                                                    驗證碼</p>
                                            </label>
                                            <div style="margin-top: 50px;">
                                                <input class="login__input" type="text" placeholder="Verification Code">
                                            </div>
                                            <div>
                                                <img src="./img/驗證碼.jpeg" style="margin-top: 20px; width: 200px;">
                                            </div>
                                        </div>

                                        <!-- 這邊若輸入錯，出現錯誤的span -->
                                        <div style="text-align: center;" >
                                            <span style="color: rgb(228, 14, 14);"></span>
                                        </div>

                                        <!-- 放歡迎的超連結，但要直接丟入，資料有辦法進去嗎??? -->
                                        <a href="./welcome_eBank.html">
                                            <div style="text-align: center;">
                                              <input class="button login__submit" type="submit" value="Log In Now" onclick="login(event)">
                                              <i class="button__icon fas fa-chevron-right"></i>
                                            </div>
                                          </a>
										<br>
										<span id="loginIsSuccess"></span>
                                        <br>
                                        <div class="text-center" style="font-size: 18px;position: relative;left: 430px;">
                                            <a class="small" href="/MavenWeb/PlanB/forgotPassword.html" style="color: aliceblue;">忘記密碼</a></div>
                                        <div class="text-center" style="font-size: 18px;position: relative;left: 430px;">
                                            <a class="small" href="./UserRegister.html" style="color: aliceblue;">註冊新帳號 </a></div>

                                    </form>
                                </div>
                                <div class="screen__background">
                                    <span class="screen__background__shape screen__background__shape4"></span>
                                    <span class="screen__background__shape screen__background__shape3"></span>
                                    <span class="screen__background__shape screen__background__shape2"></span>
                                    <span class="screen__background__shape screen__background__shape1"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 背面 -->
                    <div class="card-back">
                        <!-- QRCODE -->
                        <div class="container">
                            <div class="screen">
                                <div class="screen__content"  style="background-image: url(./img/bk0402.jpg);background-size: cover;">

                                    <img src="./img/QRCodepr.jpg" style="margin-top: 60px;">
                                    <br><br><br>
                                    <div id="countdown"></div>
                                    <br>
                                    <h4>請開啟e-BANK行動銀行APP，選擇掃描登入功能</h4>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>

</body>
</html>
<script>
function okRevise() {
    Swal.fire({
        position: 'center',
        icon: 'success',
        title: '登入成功',
        showConfirmButton: false,
        timer: 1500
    }).then(() => {
        window.location.href = "http://localhost:8080/MavenWeb/PlanA/UserHome.html";
    });
}
function noRevise() {
    Swal.fire({
    icon: 'error',
    title: '登入失敗',
    text: '帳號或密碼錯誤，請重新輸入',
    })
}
function noRevise2() {
    Swal.fire({
    icon: 'error',
    title: '驗證碼錯誤',
    text: '驗證碼輸入錯誤，請重新輸入',
    })
}
function login(event){
	event.preventDefault();
	const xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		  if (xhr.readyState === 4 && xhr.status === 200) {
			  xhr.onload = function(){
				  const responseText = xhr.responseText.trim(); // 獲取JSP返回的數據
				    if(responseText == 'success'){
				    	okRevise();
				    }
				    else{
				    	noRevise();
				    } 
			  }
		  }
	}
	xhr.open('POST', '/MavenWeb3/jsp/login.jsp');
	xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
	var IDNumber = 'IDNumber=' + document.getElementById('IDNumber').value +"&";
	var password = 'password=' + document.getElementById('password').value;
	xhr.send(IDNumber+password);
}
</script>